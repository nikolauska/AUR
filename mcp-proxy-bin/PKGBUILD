# Maintainer: Niko Lehtovirta <niko@lehtovirta.dev>

# shellcheck disable=SC2034 # makepkg consumes package metadata variables.
pkgname=mcp-proxy-bin
pkgver=0.2.3
pkgrel=1
pkgdesc="A proxy to use HTTP/SSE MCPs from STDIO clients"
arch=('x86_64')
options=('!debug')
url="https://github.com/tidewave-ai/mcp_proxy_rust"
license=('Apache-2.0')
depends=('glibc' 'libgcc_s.so')
provides=('mcp-proxy')

source=(
  "mcp-proxy-${CARCH}-${pkgver}-unknown-linux-gnu.tar.gz::https://github.com/tidewave-ai/mcp_proxy_rust/releases/download/v${pkgver}/mcp-proxy-${CARCH}-unknown-linux-gnu.tar.gz"
)
sha256sums=('10807bc79ce111a0be7643b18a7fb18331439c70ee10058dd1bee3f65e7c0e66')

package() {
  local srcdir="${srcdir:?srcdir is not set}"
  local pkgdir="${pkgdir:?pkgdir is not set}"

  cd "$srcdir" || return 1

  install -Dm755 "mcp-proxy" "$pkgdir/usr/bin/mcp-proxy"
}
