# Maintainer: Niko Lehtovirta <niko@lehtovirta.dev>

pkgname=openai-codex-bin
pkgver=0.104.0
pkgrel=1
pkgdesc="Lightweight coding agent that runs in your terminal (binary release)"
arch=('x86_64')
options=('!debug')
url="https://github.com/openai/codex"
license=('Apache-2.0')
depends=('glibc' 'libgcc_s.so' 'libcap.so' 'libz.so' 'libssl.so' 'libcrypto.so')
provides=('openai-codex')
conflicts=('openai-codex')
optdepends=(
  'git: for working with git repositories'
  'ripgrep: accelerated large-repo search'
)

source=(
  "codex-${pkgver}-${CARCH}.tar.gz::https://github.com/openai/codex/releases/download/rust-v${pkgver}/codex-${CARCH}-unknown-linux-gnu.tar.gz"
)
sha256sums=('52f6ccb7cebe1d6620f8676076acc4cde10543a6ed0eccea625498de7ae17f88')

package() {
  cd "$srcdir"

  install -Dm755 "codex-${CARCH}-unknown-linux-gnu" "$pkgdir/usr/bin/codex"
}
